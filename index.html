<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>mesitie</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
    <script src="index.js"></script>
    <script src="js/toast.js"></script>
</head>

<body>

    <div id="toast-container">

    </div>

    <div class="page-container">
        <nav id="nav-placeholder"></nav>
        <script src="js/loadNav.js"></script>



        <main style="padding-left:30px;">
            <br>

            <h1>Home (Hi, I'm Mei)</h1>
            <p>I use Python and Linux Mint.</p>
            <p style="font-size: 8px">i know a LITTLE c#</p>
            <p>This site is not finished</p>

            <p>I have general knowledge on like a billion things ask away</p>

            <p>I like:</p>
            <dl>
                <dt>â€¢ nerd computer topics </dt>
                <dd> (like programming and stuff)</dd>
                <!--<dt>â€¢ men </dt>
                <dd style="font-size: larger;"> obviously ðŸ˜¸</dd>-->
                <dt>â€¢ pianos </dt>
                <dd> (in general. i just like them a lot!)</dd>
                <dt>â€¢ technology and circutry </dt>
                <dd> i like the beep boops</dd>
            </dl>
            <p>there's not much about me,, i'm a blenderer kinda<br>i also do <i>some</i> shitty-ish art</p>
            <p>this site is literally just a really big bio</p>
            <hr>
            <p>Here's a few things for you to play with.</p>
            <a href="emojis.html">List of emojis</a>
            <br><br>
            <div style="display: flex; gap: 15px; text-align: center;">
                <div style="display: block;">
                    <input type="range" min="0" max="100" value="0" class="slider" id="demoslider">
                    <p>Value: <span id="demoValue">0</span></p>
                    <div style="background-color: #000000;">
                        <div style="position:relative">
                            <img src="img/boing.png"
                                style="position: absolute; transform: translateX(87px) translateY(-13px) rotate(-90deg);"
                                height="30px">
                            <img src="img/boing.png"
                                style="position: absolute; transform: translateX(-120px) translateY(-13px) rotate(90deg);"
                                height="30px">
                        </div>
                        <div id="demoColorBox" style="height:5px;"></div>
                    </div>
                </div>

                <br>

                <button>Button</button>
                <div style="display: block;">
                    <button id="notifdemobutton">Create a notification</button>
                    <p style="font-size: xx-small; color: #CCCCCC75;">(notif is a little delayed! be patient)
                        <br><br>also, notif function is <code>toastnotify(string);</code>
                        <br><br>ALSO!! Button might not work sometimes; it's not my API!
                    </p>
                </div>
            </div>
            <br><br>
            <div style="display: flex; flex-direction: column; width: 300px;">
                <input type="text" id="demoText" placeholder="Toast Text">
                <button onclick="toastnotify(document.getElementById('demoText').value)">Notify</button>
            </div>

            <script>
                btn = document.getElementById("notifdemobutton");

                btn.addEventListener("click", function () {
                    fetch('https://random-word.ryanrk.com/api/en/word/random/5') // Herokuapp one broke?  'https://random-word-api.herokuapp.com/word?number=5')
                        .then(response => response.json())
                        .then(words => {
                            // words is an array of 5 words now
                            toastnotify(words.join(" "));
                        })
                        .catch(error => {
                            console.error('Error fetching random words:', error);
                            alert('Error fetching random words:', error);
                        });
                });

            </script>

            <script>
                slider = document.getElementById("demoslider");
                const display = document.getElementById('demoValue');
                const box = document.getElementById('demoColorBox');
                let reachedMax = false;
                let reachedMin = false;
                let previousValue = 0;
                let previousTime = performance.now();
                const sound = new Audio('src/ding.wav');

                function easeOutSlider(to) {
                    let current = Number(slider.value);
                    let target = to;

                    function animate() {
                        // Ease out movement
                        current += (target - current) * 0.1;

                        // Stop if close enough
                        if (Math.abs(current - target) < 0.5) {
                            current = target;
                        }

                        slider.value = current;
                        display.textContent = Math.round(current);
                        box.style.backgroundColor = `hsl(${current}, 100%, 50%)`;
                        box.style.width = `${current * 2}px`;

                        if (current !== target) {
                            requestAnimationFrame(animate);
                        }
                    }

                    animate();
                }

                function onMaxReached(bounceTarget) {
                    sound.currentTime = 0;
                    sound.playbackRate = 5;
                    sound.play();
                    easeOutSlider(bounceTarget);
                    toastnotify("Boing!!");
                }



                slider.addEventListener('input', () => {
                    const val = slider.value;
                    const now = performance.now();

                    const deltaVal = val - previousValue;
                    const deltaTime = now - previousTime;

                    let speed = deltaVal / deltaTime; // Units: value change per ms

                    display.textContent = val;

                    box.style.backgroundColor = `hsl(${val}, 100%, 50%)`;
                    box.style.width = `${val * 2}px`;

                    if (+val === 100 && !reachedMax) {
                        reachedMax = true;
                        let bounceAmount = Math.min(Math.abs(speed) * 100, 90);
                        let target = 100 - bounceAmount;

                        onMaxReached(target);
                    }

                    if (+val < 100) {
                        reachedMax = false;
                    }


                    if (+val === 0 && !reachedMin) {
                        reachedMin = true;
                        let bounceAmount = Math.min(Math.abs(speed) * 100, 90);
                        let target = 0 + bounceAmount;

                        onMaxReached(target);
                    }

                    if (+val > 0) {
                        reachedMin = false;
                    }

                    previousValue = val;
                    previousTime = now;
                });
            </script>

            <br><br><br>


            <p>And here's my (LAPTOP!!!) neofetch..</p>
            <a href="img/neofetch.png"><img src="img/neofetch.png"
                    style="box-shadow: 0px 0px 20px #000; border-radius: 5px;" height="300px"></a>
            <style>
                input,
                textarea {
                    width: 50%;
                    padding: 15px;
                    margin: 12px 0;
                    border: none;
                    border-radius: 6px;
                    background-color: #312335 !important;
                    color: #fff;
                    font-size: 15px;
                    box-sizing: border-box;
                }

                #commentForm {
                    background-color: #0604079a;
                    padding: 15px;
                    border-radius: 5px;
                    width: fit-content;
                }
            </style>
            <form id="commentForm">
                <label>LOCAL comments thing so you can preview them</label>
                <br>
                <input type="text" name="name" placeholder="Name"></input>
                <br>
                <textarea name="text" placeholder="Comment"></textarea>
                <br>
                <button type="submit" style="
                        position: relative; padding: 10px; 
                        background-color: #2a914c;">Post Comment</button>
            </form>
            <div id="comments"></div>
            <script>
                function replaceEmojiCodes(text) {
                    return text.replace(/:([a-zA-Z0-9_-]+):/g, (match, filename) => {
                        return `<span style="display:inline-flex; align-items:center; vertical-align:middle;">
                            <img src="img/emoji/${filename}.gif" alt="${filename}" style="height:1.5em; width:auto;"/>
                          </span>`;
                    });
                }
                form = document.getElementById("commentForm")
                const commentsContainer = document.getElementById("comments");
                const comments = []

                form.addEventListener("submit", async e => {
                    e.preventDefault(); // prevent reload

                    const formData = new FormData(form);
                    const text = formData.get("text");
                    const name = formData.get("name") || "Anonymous";

                    if (!text) return alert("Please write something!");
                    const newComment = {
                        user: name,
                        text: text
                    };
                    comments.push(newComment);

                    const commentDiv = document.createElement("div");
                    commentDiv.className = "comment";

                    const nameSpan = document.createElement("span");
                    nameSpan.id = "name";
                    nameSpan.textContent = newComment.user;

                    const textSpan = document.createElement("span");
                    textSpan.id = "text";
                    textSpan.innerHTML = replaceEmojiCodes(newComment.text);

                    commentDiv.appendChild(nameSpan);
                    commentDiv.appendChild(textSpan);

                    commentsContainer.appendChild(commentDiv);


                });
            </script>

    </div>
    </main>

    <footer style="font-family: monospace;" id="footer-placeholder"></footer>
    <script src="js/loadFooter.js"></script>
    </div>


</body>

</html>